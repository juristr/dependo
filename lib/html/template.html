<html>
  <head>
    <title><%= title %></title>
    <style>
      <%= css %>
    </style>
  </head>

  <body>
    <div>
        Filter: <input type="text" id="filter" />
        <input type="button" id="filterBtn" value="Ok" />
    </div>
    <div class="graph">
      <div class="control-zoom">
          <a class="control-zoom-in" href="#" title="Zoom in"></a>
          <a class="control-zoom-out" href="#" title="Zoom out"></a>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.0.1/d3.v3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

    <script>
      var getGraphData = function() {
          var graph = <%= graphData %>;
          return graph;
     };
      var basePath = "<%= basePath %>";
      var graphIdentification = "<%= graphID %>";
      var nodePositions = null; //replace with the object you find in console to persist node positions

      (function() {
        var filterText;
        document.getElementById('filterBtn').addEventListener('click', function() {
          filterText = document.getElementById('filter').value;
          render();
        });
 
        var filterFunction = function(n) {
            if (filterText && filterText !== '' && n.id.indexOf(filterText) > -1) {
                return false;
            } else {
                return true;
            }
        };

        var linkFilterFunction = function(link) {
            // console.log(link);
            // return true;
            if (filterText && filterText !== '' && (getGraphData().nodes[link.source].id.indexOf(filterText) > -1 || getGraphData().nodes[link.target].id.indexOf(filterText) > -1)) {
                return false;
            } else {
                return true;
            }
        }

        <%= js %>
      })();
    </script>

  </body>
</html>
