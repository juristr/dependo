<html>
  <head>
    <title>dependo</title>
    <style>
        body {
    background: #fff;
    padding:0;
    margin:0;
    font-family:helvetica,arial;
    overflow: hidden;
  }

  .graph {
    width:100%;
    height: 100%;
    fill: #000;
    overflow: hidden;
    position: relative;
  }

  svg {
    height: 100%;
    width: 100%;
  }

  g.dimmed  {
    stroke-opacity: 0.05;
  }

  g.dimmed text.shadow {
    stroke-opacity: 0;
  }

  circle {
    fill: #ccc;
    stroke: #333;
    stroke-width: 1.5px;
  }

  text {
    font: 10px sans-serif;
    pointer-events: none;
  }

  text.shadow {
    stroke: #fff;
    stroke-width: 3px;
    stroke-opacity: .8;
  }

  path.link {
    fill: none;
    stroke: #666;
    stroke-width: 1.5px;
  }

  path.link.licensing {
    stroke: green;
  }

  path.link.resolved {
    stroke-dasharray: 0,2 1;
  }


  .control-zoom {
    position: fixed;
    top: 10px;
    left: 10px;
    background: rgba(0, 0, 0, 0.25);
    padding: 5px;
    border-radius: 7px;
    z-index: 100;
  }

  .control-zoom a {
    background: rgba(255, 255, 255, 0.75);
    background-position: 50% 50%;
    background-repeat: no-repeat;
    display: block;
    width: 19px;
    height: 19px;
    border-radius: 4px;
  }

  .control-zoom a:last-child {
    margin: 0;
  }

  .control-zoom a:hover {
    background-color: white;
  }

  .control-zoom > .control-zoom-in {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJAQMAAADaX5RTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkUwRTZCRkI3NjQzNzExRTBBQUI3RTAwMUU2MTZDRkQ5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkUwRTZCRkI4NjQzNzExRTBBQUI3RTAwMUU2MTZDRkQ5Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTBFNkJGQjU2NDM3MTFFMEFBQjdFMDAxRTYxNkNGRDkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTBFNkJGQjY2NDM3MTFFMEFBQjdFMDAxRTYxNkNGRDkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7cwPMXAAAABlBMVEUAAAD///+l2Z/dAAAAAnRSTlP/AOW3MEoAAAARSURBVAhbY3jcwABBcAATAQBxlwhT4XiahwAAAABJRU5ErkJggg==);
    margin-bottom: 5px;
  }

  .control-zoom > .control-zoom-out {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJAQMAAADaX5RTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkU5MjRDMEQ5NjQzNzExRTBCM0JDQkU2MzVGQTBCNjRDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkU5MjRDMERBNjQzNzExRTBCM0JDQkU2MzVGQTBCNjRDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTkyNEMwRDc2NDM3MTFFMEIzQkNCRTYzNUZBMEI2NEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTkyNEMwRDg2NDM3MTFFMEIzQkNCRTYzNUZBMEI2NEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7uh53jAAAABlBMVEUAAAD///+l2Z/dAAAAAnRSTlP/AOW3MEoAAAARSURBVAhbY/jfwABBcAATAQB6xwj7vHGbwAAAAABJRU5ErkJggg==);
    margin-bottom: 5px;
  }

    </style>
  </head>

  <body>
    <div>
        Filter: <input type="text" id="filter" />
        <input type="button" id="filterBtn" value="Ok" />
    </div>
    <div class="graph">
      <div class="control-zoom">
          <a class="control-zoom-in" href="#" title="Zoom in"></a>
          <a class="control-zoom-out" href="#" title="Zoom out"></a>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.0.1/d3.v3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

    <script>
      var getGraphData = function() {
          var graph = {"directed":true,"multigraph":false,"graph":[],"nodes":[{"id":"app"},{"id":"app.directive"},{"id":"authentication/module"},{"id":"basemaps/module"},{"id":"common/ajaxprogress/module"},{"id":"conversion/module"},{"id":"core/module"},{"id":"data-export/module"},{"id":"diagnostics/module"},{"id":"documents/module"},{"id":"editing/module"},{"id":"footer/module"},{"id":"help/module"},{"id":"identify-results/module"},{"id":"identify/module"},{"id":"layergroups/module"},{"id":"layertree/module"},{"id":"loader/module"},{"id":"map/maps.module"},{"id":"measure/module"},{"id":"ng1-egov-authentication"},{"id":"notification/module"},{"id":"omnibox/module"},{"id":"permalink/module"},{"id":"popup/module"},{"id":"print/module"},{"id":"selection/module"},{"id":"settings/module"},{"id":"shell/module"},{"id":"spatial-query-manager/module"},{"id":"authentication/mapscRestrict.directive"},{"id":"Egov"},{"id":"authentication/security.interceptor"},{"id":"authentication/security.service"},{"id":"authentication/securityRetryQueue.service"},{"id":"authentication/user.service"},{"id":"confirm-modal/module"},{"id":"authentication/routeSecurity.service"},{"id":"basemaps/baseMapSelector.directive"},{"id":"basemaps/baseMapSidebarWidget.component"},{"id":"basemaps/translations.config"},{"id":"common/directives/module"},{"id":"common/directives/ngEnter.directive"},{"id":"common/directives/ngIgnoreDirty.directive"},{"id":"common/modals/modalPopup.service"},{"id":"common/modals/module"},{"id":"common/modals/translations.config"},{"id":"common/userwidget/module"},{"id":"common/userwidget/userwidget.directive"},{"id":"moment"},{"id":"confirm-modal/confirmModal.service"},{"id":"conversion/conversion.filter"},{"id":"conversion/conversion.service"},{"id":"big"},{"id":"core/app.constants"},{"id":"core/dynamicEndpoint.service"},{"id":"core/geometryHelper.service"},{"id":"jsts"},{"id":"core/reducer"},{"id":"core/translation.config"},{"id":"ngrx-store/dispatcher"},{"id":"ngrx-store/store"},{"id":"data-export/dataExport.component"},{"id":"data-export/dataExport.constants"},{"id":"data-export/dataExport.service"},{"id":"data-export/dataExportOpener.directive"},{"id":"data-export/translations.config"},{"id":"delete-confirmation/confirmationDelete.service"},{"id":"delete-confirmation/module"},{"id":"delete-confirmation/translations.config"},{"id":"diagnostics/layersDebug.directive"},{"id":"documents/cardflow.directive"},{"id":"documents/documents.constants"},{"id":"documents/translations.config"},{"id":"identify-results/results.constants"},{"id":"editing/attributesSelector.service"},{"id":"editing/circularMenu.directive"},{"id":"editing/commands/command.factory"},{"id":"editing/coordsEditor.directive"},{"id":"editing/coordsEditor.service"},{"id":"editing/coordsEditorOpener.directive"},{"id":"editing/coordsPopup.directive"},{"id":"editing/coordsPopup.service"},{"id":"editing/documentsOpener.directive"},{"id":"editing/drawer.service"},{"id":"map/treeUtils"},{"id":"editing/drawerFeatureManager.service"},{"id":"editing/drawerstyles.service"},{"id":"editing/editTools/cloneTool.factory"},{"id":"editing/editTools/deleteHoleTool.factory"},{"id":"editing/editTools/deleteTool.factory"},{"id":"editing/editTools/differenceTool.factory"},{"id":"editing/editTools/holeTool.factory"},{"id":"editing/editTools/intersectTool.factory"},{"id":"editing/editTools/moveTool.factory"},{"id":"editing/editTools/rotateTool.factory"},{"id":"mathjs"},{"id":"editing/editTools/splitTool.factory"},{"id":"editing/editTools/unionTool.factory"},{"id":"editing/editing.component"},{"id":"editing/editing.constants"},{"id":"editing/editingjstsHelper.factory"},{"id":"editing/formly.config"},{"id":"editing/messageBox.service"},{"id":"editing/templateModel.service"},{"id":"editing/templatetree.directive"},{"id":"editing/translations.config"},{"id":"editing/undoredo.service"},{"id":"footer/footer.constants"},{"id":"footer/footer.directive"},{"id":"help/help.directive"},{"id":"help/helpModel.service"},{"id":"identify-results/results.directive"},{"id":"identify-results/results.service"},{"id":"identify-results/resultsView.service"},{"id":"identify-results/translations.config"},{"id":"identify/identify.component"},{"id":"identify/identify.constants"},{"id":"identify/identify.service"},{"id":"identify/shortInfo.directive"},{"id":"identify/shortInfoTooltip.directive"},{"id":"identify/translations.config"},{"id":"layergroups/constants"},{"id":"layergroups/fallbackSrc.directive"},{"id":"layergroups/layerGroups.directive"},{"id":"layertree/constants"},{"id":"layertree/layertree.directive"},{"id":"layertree/layertreeSidebarWidget.component"},{"id":"layertree/opacity.directive"},{"id":"layertree/opacityHint.directive"},{"id":"layertree/translations.config"},{"id":"layertree/transparency.directive"},{"id":"loader/lazy.provider"},{"id":"loader/lazyLoader.directive"},{"id":"loader/lazyLoader.service"},{"id":"oclazyload"},{"id":"require-css"},{"id":"main"},{"id":"bootstrap-js"},{"id":"map/almond"},{"id":"map/constants"},{"id":"map/contextSelection.service"},{"id":"map/drawTools.directive"},{"id":"map/extentPreview.directive"},{"id":"map/layerLegend.directive"},{"id":"map/layerListUtils"},{"id":"map/layerManager.service"},{"id":"map/layerModel.service"},{"id":"map/layerTreeConverter.service"},{"id":"map/main"},{"id":"map/map"},{"id":"map/map.directive"},{"id":"proj4"},{"id":"utils/cors"},{"id":"map/map.service"},{"id":"rxjs/Subject"},{"id":"map/mapContextModel.service"},{"id":"map/mapDrawer.service"},{"id":"map/mapScalePopover.directive"},{"id":"map/mapsProjections.service"},{"id":"map/openlayerStyles.service"},{"id":"map/scale.filter"},{"id":"map/scaleFormat.directive"},{"id":"map/scaleSelection.directive"},{"id":"map/stylesConstruction.service"},{"id":"map/translations.config"},{"id":"map/userContext.interceptor"},{"id":"map/zoom.service"},{"id":"map/mapswidget.app"},{"id":"popup/module-mock"},{"id":"settings/module-mock"},{"id":"measure/measure.component"},{"id":"measure/measureContext.service"},{"id":"measure/measureLayers.service"},{"id":"measure/measureMathHelper.service"},{"id":"measure/translations.config"},{"id":"namespace"},{"id":"rxjs/BehaviorSubject"},{"id":"rxjs/add/operator/scan"},{"id":"rxjs/operator/distinctUntilChanged"},{"id":"rxjs/operator/map"},{"id":"rxjs/operator/pluck"},{"id":"notification/notification.service"},{"id":"omnibox/fifoArray"},{"id":"omnibox/infiniteScroll.directive"},{"id":"omnibox/omnibox.directive"},{"id":"omnibox/resultsNavigation.service"},{"id":"omnibox/search.service"},{"id":"omnibox/searchModel.service"},{"id":"omnibox/translations.config"},{"id":"permalink/browserhistory.service"},{"id":"permalink/permalink.service"},{"id":"popup/popup.constants"},{"id":"popup/popup.directive"},{"id":"popup/popupDroppableZone.directive"},{"id":"popup/popupOpener.directive"},{"id":"print/geometryHelper.service"},{"id":"print/print.component"},{"id":"print/print.constants"},{"id":"print/printContext.service"},{"id":"print/translations.config"},{"id":"routes"},{"id":"selection/bufferInput.directive"},{"id":"selection/import.translations.config"},{"id":"selection/importCrsSelection.directive"},{"id":"selection/importFeatures.service"},{"id":"selection/selectedFeatures.service"},{"id":"selection/selection.component"},{"id":"selection/selection.constants"},{"id":"selection/selectionContext.factory"},{"id":"selection/translations.config"},{"id":"settings/localUserSettings.service"},{"id":"settings/settingkeys.constants"},{"id":"settings/userSettings.service"},{"id":"shell/appNavigation.directive"},{"id":"shell/sidebar.component"},{"id":"shell/sidebarWidget.directive"},{"id":"shell/toolboxNavigationSidebarWidget.component"},{"id":"shell/toolboxSidebarWidget.component"},{"id":"shell/translations.config"},{"id":"spatial-query-manager/spatialQueryManager.service"},{"id":"spatial-query-manager/spatialQueryModel.service"},{"id":"spatial-query-manager/spatialRequestModel.service"},{"id":"spatial-query-manager/sqmConstants.constants"},{"id":"spatial-query-manager/translations.config"}],"links":[{"source":0,"target":1},{"source":0,"target":2},{"source":0,"target":3},{"source":0,"target":4},{"source":0,"target":5},{"source":0,"target":6},{"source":0,"target":7},{"source":0,"target":8},{"source":0,"target":9},{"source":0,"target":10},{"source":0,"target":11},{"source":0,"target":12},{"source":0,"target":13},{"source":0,"target":14},{"source":0,"target":15},{"source":0,"target":16},{"source":0,"target":17},{"source":0,"target":18},{"source":0,"target":19},{"source":0,"target":20},{"source":0,"target":21},{"source":0,"target":22},{"source":0,"target":23},{"source":0,"target":24},{"source":0,"target":25},{"source":0,"target":26},{"source":0,"target":27},{"source":0,"target":28},{"source":0,"target":29},{"source":2,"target":31},{"source":2,"target":30},{"source":2,"target":32},{"source":2,"target":33},{"source":2,"target":34},{"source":2,"target":35},{"source":2,"target":36},{"source":35,"target":31},{"source":3,"target":38},{"source":3,"target":39},{"source":3,"target":40},{"source":3,"target":6},{"source":3,"target":18},{"source":41,"target":42},{"source":41,"target":43},{"source":45,"target":44},{"source":45,"target":46},{"source":47,"target":48},{"source":48,"target":49},{"source":36,"target":50},{"source":52,"target":53},{"source":5,"target":51},{"source":5,"target":52},{"source":56,"target":57},{"source":6,"target":41},{"source":6,"target":54},{"source":6,"target":55},{"source":6,"target":56},{"source":6,"target":58},{"source":6,"target":59},{"source":6,"target":60},{"source":6,"target":61},{"source":7,"target":62},{"source":7,"target":63},{"source":7,"target":64},{"source":7,"target":65},{"source":7,"target":66},{"source":7,"target":18},{"source":68,"target":67},{"source":68,"target":69},{"source":8,"target":70},{"source":9,"target":71},{"source":9,"target":72},{"source":9,"target":73},{"source":9,"target":11},{"source":9,"target":74},{"source":84,"target":85},{"source":95,"target":96},{"source":101,"target":57},{"source":10,"target":75},{"source":10,"target":76},{"source":10,"target":77},{"source":10,"target":78},{"source":10,"target":79},{"source":10,"target":80},{"source":10,"target":81},{"source":10,"target":82},{"source":10,"target":83},{"source":10,"target":84},{"source":10,"target":86},{"source":10,"target":87},{"source":10,"target":88},{"source":10,"target":89},{"source":10,"target":90},{"source":10,"target":91},{"source":10,"target":92},{"source":10,"target":93},{"source":10,"target":94},{"source":10,"target":95},{"source":10,"target":97},{"source":10,"target":98},{"source":10,"target":99},{"source":10,"target":100},{"source":10,"target":101},{"source":10,"target":102},{"source":10,"target":103},{"source":10,"target":104},{"source":10,"target":105},{"source":10,"target":106},{"source":10,"target":107},{"source":11,"target":108},{"source":11,"target":109},{"source":12,"target":110},{"source":12,"target":111},{"source":13,"target":7},{"source":13,"target":72},{"source":13,"target":11},{"source":13,"target":74},{"source":13,"target":112},{"source":13,"target":113},{"source":13,"target":114},{"source":13,"target":115},{"source":13,"target":18},{"source":118,"target":85},{"source":14,"target":6},{"source":14,"target":72},{"source":14,"target":116},{"source":14,"target":117},{"source":14,"target":118},{"source":14,"target":119},{"source":14,"target":120},{"source":14,"target":121},{"source":14,"target":18},{"source":15,"target":122},{"source":15,"target":123},{"source":15,"target":124},{"source":15,"target":18},{"source":16,"target":6},{"source":16,"target":125},{"source":16,"target":126},{"source":16,"target":127},{"source":16,"target":128},{"source":16,"target":129},{"source":16,"target":130},{"source":16,"target":131},{"source":16,"target":18},{"source":16,"target":27},{"source":17,"target":2},{"source":17,"target":6},{"source":17,"target":132},{"source":17,"target":133},{"source":17,"target":134},{"source":17,"target":135},{"source":17,"target":136},{"source":137,"target":0},{"source":137,"target":138},{"source":146,"target":145},{"source":146,"target":85},{"source":148,"target":85},{"source":151,"target":152},{"source":151,"target":153},{"source":154,"target":85},{"source":154,"target":155},{"source":18,"target":45},{"source":18,"target":5},{"source":18,"target":6},{"source":18,"target":140},{"source":18,"target":141},{"source":18,"target":142},{"source":18,"target":143},{"source":18,"target":144},{"source":18,"target":146},{"source":18,"target":147},{"source":18,"target":148},{"source":18,"target":151},{"source":18,"target":154},{"source":18,"target":156},{"source":18,"target":157},{"source":18,"target":159},{"source":18,"target":160},{"source":18,"target":161},{"source":18,"target":162},{"source":18,"target":163},{"source":18,"target":164},{"source":18,"target":165},{"source":18,"target":166},{"source":18,"target":167},{"source":18,"target":19},{"source":18,"target":22},{"source":18,"target":152},{"source":18,"target":28},{"source":18,"target":29},{"source":168,"target":5},{"source":168,"target":6},{"source":168,"target":11},{"source":168,"target":14},{"source":168,"target":15},{"source":168,"target":16},{"source":168,"target":18},{"source":168,"target":19},{"source":168,"target":22},{"source":168,"target":169},{"source":168,"target":170},{"source":174,"target":152},{"source":19,"target":6},{"source":19,"target":68},{"source":19,"target":171},{"source":19,"target":172},{"source":19,"target":173},{"source":19,"target":174},{"source":19,"target":175},{"source":60,"target":155},{"source":61,"target":177},{"source":61,"target":178},{"source":61,"target":179},{"source":61,"target":180},{"source":61,"target":181},{"source":21,"target":182},{"source":22,"target":6},{"source":22,"target":184},{"source":22,"target":185},{"source":22,"target":186},{"source":22,"target":187},{"source":22,"target":188},{"source":22,"target":189},{"source":22,"target":27},{"source":187,"target":183},{"source":187,"target":155},{"source":23,"target":190},{"source":23,"target":191},{"source":24,"target":192},{"source":24,"target":193},{"source":24,"target":194},{"source":24,"target":195},{"source":169,"target":192},{"source":25,"target":6},{"source":25,"target":196},{"source":25,"target":197},{"source":25,"target":198},{"source":25,"target":199},{"source":25,"target":200},{"source":197,"target":85},{"source":26,"target":5},{"source":26,"target":6},{"source":26,"target":18},{"source":26,"target":202},{"source":26,"target":203},{"source":26,"target":204},{"source":26,"target":205},{"source":26,"target":206},{"source":26,"target":207},{"source":26,"target":208},{"source":26,"target":209},{"source":26,"target":210},{"source":207,"target":85},{"source":27,"target":6},{"source":27,"target":211},{"source":27,"target":212},{"source":27,"target":213},{"source":170,"target":212},{"source":28,"target":6},{"source":28,"target":214},{"source":28,"target":215},{"source":28,"target":216},{"source":28,"target":217},{"source":28,"target":218},{"source":28,"target":219},{"source":29,"target":6},{"source":29,"target":21},{"source":29,"target":220},{"source":29,"target":221},{"source":29,"target":222},{"source":29,"target":223},{"source":29,"target":224}]};
          return graph;
     };
      var basePath = "D:/projects/sdi/maps/app/scripts/";
      var graphIdentification = "8ce91f11136f678564fa57295c7e270581d8d827";
      var nodePositions = null; //replace with the object you find in console to persist node positions

      (function() {
        var filterText;
        document.getElementById('filterBtn').addEventListener('click', function() {
          filterText = document.getElementById('filter').value;
          render();
        });
 
        var filterFunction = function(n) {
            if (filterText && filterText !== '' && n.id.indexOf(filterText) > -1) {
                return false;
            } else {
                return true;
            }
        };

        var url = 'data.json';
var r = 10;
var graph, layout, zoom, nodes, links, data;
var linkedByIndex = {};
var graphWidth, graphHeight;

// Helpers
function formatClassName(prefix, object) {
return prefix + '-' + object.id.replace(/(\.|\/)/gi, '-');
}

function findElementByNode(prefix, node) {
var selector = '.'+formatClassName(prefix, node);
return graph.select(selector);
}

function isConnected(a, b) {
return linkedByIndex[a.index + "," + b.index] || linkedByIndex[b.index + "," + a.index] || a.index == b.index;
}

function fadeRelatedNodes(d, opacity, nodes, links) {

// Clean
$('path.link').removeAttr('data-show');

nodes.style("stroke-opacity", function(o) {
    var thisOpacity;

    if (isConnected(d, o)) {
    thisOpacity = 1;
    } else {
    thisOpacity = opacity;
    }

    this.setAttribute('fill-opacity', thisOpacity);
    this.setAttribute('stroke-opacity', thisOpacity);

    if(thisOpacity == 1) {
    this.classList.remove('dimmed');
    } else {
    this.classList.add('dimmed');
    }

    return thisOpacity;
});

links.style("stroke-opacity", function(o) {

    if (o.source === d) {

    // Highlight target/sources of the link
    var elmNodes = graph.selectAll('.'+formatClassName('node', o.target));
    elmNodes.attr('fill-opacity', 1);
    elmNodes.attr('stroke-opacity', 1);

    elmNodes.classed('dimmed', false);

    // Highlight arrows
    var elmCurrentLink = $('path.link[data-source=' + o.source.index + ']');
    elmCurrentLink.attr('data-show', true);
    elmCurrentLink.attr('marker-end', 'url(#regular)');

    return 1;

    } else {

    var elmAllLinks = $('path.link:not([data-show])');

    if(opacity == 1) {
        elmAllLinks.attr('marker-end', 'url(#regular)');
    } else {
        elmAllLinks.attr('marker-end', '');
    }

    return opacity;
    }

});
}


function render() {

zoom = d3.behavior.zoom();
zoom.on("zoom", onZoomChanged);

// Setup layout
layout = d3.layout.force()
    .gravity(.05)
    .charge(-300)
    .linkDistance(100);

// Setup graph
graph = d3.select(".graph")
    .append("svg:svg")
    .attr("pointer-events", "all")
    .call(zoom)
    .append('svg:g')
    .attr('width', graphWidth)
    .attr('height', graphHeight);

d3.select(window).on("resize", resize);

// Load graph data
var graphData = window.getGraphData();
// Load node placement
var storedNodes = getNodes();
graphData.nodes = graphData.nodes.map(function(n){
    if(storedNodes[n.id]){
    return storedNodes[n.id];
    } else {
    return n;
    }
});

renderGraph(graphData);

data = graphData;

// Resize
resize();

centerGraph();

// Controlers
$('.control-zoom a').on('click', onControlZoomClicked);
}

function resize() {
graphWidth = window.innerWidth;
graphHeight = window.innerHeight;
graph.attr("width", graphWidth)
        .attr("height", graphHeight);

layout.size([graphWidth, graphHeight])
        .resume();
}

function centerGraph() {

var centerTranslate = [
    (graphWidth / 2) - (graphWidth * 0.2 / 2),
    (graphHeight / 2) - (graphHeight * 0.2 / 2)
];

zoom.translate(centerTranslate);

// Render transition
graph.transition()
    .duration(500)
    .attr("transform", "translate(" + zoom.translate() + ")" + " scale(" + zoom.scale() + ")");
}

function renderGraph(data) {
// Markers
graph.append("svg:defs").selectAll("marker")
    .data(['regular'])
    .enter().append("svg:marker")
    .attr("id", String)
    .attr("viewBox", "0 -5 10 10")
    .attr("refX", 15)
    .attr("refY", -1.5)
    .attr("markerWidth", 6)
    .attr("markerHeight", 6)
    .attr("orient", "auto")
    .append("svg:path")
    .attr("d", "M0,-5L10,0L0,5");

// Lines
links = graph.append('svg:g').selectAll("line")
    .data(data.links)
    .enter().append("svg:path")
    .attr('class', 'link')
    .attr("data-target", function(o) { return o.target })
    .attr("data-source", function(o) { return o.source })
    .attr("marker-end", function(d) { return "url(#regular)"; });
// Nodes
nodes = graph.append('svg:g').selectAll("node")
    .data(data.nodes)
    .enter().append("svg:g")
    .filter(filterFunction)
    .attr("class","node")
    .call(layout.drag)
    .on("mousedown", onNodeMouseDown);

    // Circles
    nodes.attr("class", function(d) { return formatClassName('node', d) })
    nodes.append("svg:circle")
    .attr("class", function(d) { return formatClassName('circle', d) })
    .attr("r", 6)
    .on("mouseover", onNodeMouseOver.bind(this, nodes, links) )
    .on("mouseout", onNodeMouseOut.bind(this, nodes, links) );


    // A copy of the text with a thick white stroke for legibility.
    nodes.append("svg:text")
        .attr("x", 15)
        .attr("y", ".31em")
        .attr("class", function(d) { return 'shadow ' + formatClassName('text', d) })
        .text(function(d) { return d.id.replace(window.basePath, '') });

    nodes.append("svg:text")
        .attr("class", function(d) { return formatClassName('text', d) })
        .attr("x", 15)
        .attr("y", ".31em")
        .text(function(d) { return d.id.replace(window.basePath, '') });

// Build linked index
data.links.forEach(function(d) {
    linkedByIndex[d.source.index + "," + d.target.index] = 1;
});

// Draw the
layout.nodes(data.nodes);
layout.links(data.links);
layout.on("tick", onTick);
layout.start();

zoom.scale(0.4);

// Render transition
graph.transition()
    .duration(500)
    .attr("transform", "scale(" + zoom.scale() + ")");

}

function onNodeMouseOver(nodes, links, d) {

// Highlight circle
var elm = findElementByNode('circle', d);
elm.style("fill", '#b94431');

// Highlight related nodes
fadeRelatedNodes(d, .05, nodes, links);
}

function onNodeMouseOut(nodes, links, d) {

// Highlight circle
var elm = findElementByNode('circle', d);
elm.style("fill", '#ccc');

// Highlight related nodes
fadeRelatedNodes(d, 1, nodes, links);
debouncedPersist();
}

function onTick(e) {

links.attr("d", function(d) {
    var dx = d.target.x - d.source.x,
        dy = d.target.y - d.source.y,
        dr = Math.sqrt(dx * dx + dy * dy);
    return "M" + d.source.x + "," + d.source.y + "A" + dr + "," + dr + " 0 0,1 " + d.target.x + "," + d.target.y;
});

nodes.attr("cx", function(d) { return d.x; })
        .attr("cy", function(d) { return d.y; })
        .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
}

function onControlZoomClicked(e) {
var elmTarget = $(this)
var scaleProcentile = 0.20;

// Scale
var currentScale = zoom.scale();
var newScale;
if(elmTarget.hasClass('control-zoom-in')) {
    newScale = currentScale * (1 + scaleProcentile);
} else {
    newScale = currentScale * (1 - scaleProcentile);
}
newScale = Math.max(newScale, 0);

// Translate
var centerTranslate = [
    (graphWidth / 2) - (graphWidth * newScale / 2),
    (graphHeight / 2) - (graphHeight * newScale / 2)
];

// Store values
zoom
    .translate(centerTranslate)
    .scale(newScale);

// Render transition
graph.transition()
    .duration(500)
    .attr("transform", "translate(" + zoom.translate() + ")" + " scale(" + zoom.scale() + ")");

}

function onZoomChanged() {
graph.attr("transform", "translate(" + d3.event.translate + ")" + " scale(" + d3.event.scale + ")");
}

function persistNodes(nodes) {
var store = nodes.filter(function(n){ return n.fixed }).reduce(function(mem,n){
    mem[n.id]=n;
    return mem;
},{});
store = JSON.stringify(store);
window.localStorage.setItem("dependo"+window.graphIdentification, store);
}

function getNodes() {
try {
    if(window.nodePositions){
    return JSON.parse(window.nodePositions);
    }else{
    return JSON.parse(window.localStorage.getItem("dependo"+window.graphIdentification)) || {};
    }
} catch (e) {
    return {};
}
}


function onNodeMouseDown(d) {
    d.fixed = true;
    d3.select(this).classed("sticky", true);
    debouncedPersist();
}

var persistTimer;
function debouncedPersist() {
clearTimeout(persistTimer);
persistTimer = setTimeout(function(){
    persistNodes(data.nodes)
},1000);
}

render();
      })();
    </script>

  </body>
</html>
